<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% if deck %}Editar{% else %}Criar Novo{% endif %} Deck</title>
</head>
<body>
    <h1>{% if deck %}Editar{% else %}Criar Novo{% endif %} Deck</h1>
    <div class="container">
        <div class="form-container">
            <form method="post" action="{% if deck %}{% url 'create_or_edit_deck' deck.id %}{% else %}{% url 'create_or_edit_deck' %}{% endif %}">                {% csrf_token %}
                {{ form.as_p }}
                <button type="submit">{% if deck %}Salvar{% else %}Criar{% endif %}</button>
            </form>
        </div>
        <div class="cards-container">
            <h2>Cartas disponíveis</h2>
            <ul>
                {% for card in cards %}
                <li>
                    <label>
                        <input type="checkbox" name="main_deck" value="{{ card.id }}" {% if card in deck.main_deck.all %}checked{% endif %}>
                        {{ card.name }} ({{ card.type }})
                    </label>
                </li>
                {% endfor %}
            </ul>

            <h2>Extra Deck</h2>
            <ul>
                {% for card in cards %}
                <li>
                    <label>
                        <input type="checkbox" name="extra_deck" value="{{ card.id }}" {% if card in deck.extra_deck.all %}checked{% endif %}>
                        {{ card.name }} ({{ card.type }})
                    </label>
                </li>
                {% endfor %}
            </ul>

            <h2>Side Deck</h2>
            <ul>
                {% for card in cards %}
                <li>
                    <label>
                        <input type="checkbox" name="side_deck" value="{{ card.id }}" {% if card in deck.side_deck.all %}checked{% endif %}>
                        {{ card.name }} ({{ card.type }})
                    </label>
                </li>
                {% endfor %}
            </ul>
        </div>
    </div>
</body>

      
<script>
    const cards = document.querySelectorAll('.card');
    const deckArea = document.getElementById('deck-area'); // Certifique-se de ter um elemento com este ID no seu template
  
    cards.forEach(card => {
      card.addEventListener('dragstart', (event) => {
        event.dataTransfer.setData('cardId', card.dataset.cardId);
        event.dataTransfer.setData('cardName', card.dataset.cardName);
      });
    });
  
    deckArea.addEventListener('dragover', (event) => {
      event.preventDefault();
    });
  
    deckArea.addEventListener('drop', (event) => {
      event.preventDefault();
      const cardId = event.dataTransfer.getData('cardId');
      const cardName = event.dataTransfer.getData('cardName');
  
      // Aqui você adicionaria a lógica para adicionar a carta ao seu deck
      console.log(`Carta adicionada ao deck: ${cardName} (ID: ${cardId})`); 
    });
  </script>
  
      
</html>
